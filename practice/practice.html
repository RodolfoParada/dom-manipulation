<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lista de Tareas Interactiva</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .contenedor {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    header {
      background: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }

    h1 {
      margin-bottom: 10px;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      font-size: 0.9rem;
    }

    .stat {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .stat-number {
      font-size: 1.5rem;
      font-weight: bold;
      color: #3498db;
    }

    .formulario-agregar {
      padding: 20px;
      background: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
    }

    .form-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    input[type="text"] {
      flex: 1;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #3498db;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s;
    }

    .btn-primary {
      background: #3498db;
      color: white;
    }

    .btn-primary:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    .btn-danger {
      background: #e74c3c;
      color: white;
    }

    .btn-danger:hover {
      background: #c0392b;
    }

    .filtros {
      padding: 15px 20px;
      background: #f8f9fa;
      border-bottom: 1px solid #e9ecef;
      display: flex;
      gap: 10px;
      justify-content: center;
    }

    .filtro-btn {
      padding: 8px 16px;
      background: #6c757d;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .filtro-btn.active {
      background: #3498db;
    }

    .filtro-btn:hover {
      transform: translateY(-1px);
    }

    .lista-tareas {
      max-height: 400px;
      overflow-y: auto;
    }

    .tarea {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      border-bottom: 1px solid #e9ecef;
      transition: all 0.3s;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .tarea:hover {
      background: #f8f9fa;
    }

    .tarea.completed {
      background: #d4edda;
      text-decoration: line-through;
      opacity: 0.7;
    }

    .checkbox {
      width: 20px;
      height: 20px;
      margin-right: 15px;
      cursor: pointer;
    }

    .texto-tarea {
      flex: 1;
      font-size: 16px;
    }

    .acciones {
      display: flex;
      gap: 5px;
    }

    .btn-small {
      padding: 5px 10px;
      font-size: 12px;
      border-radius: 3px;
    }

    .editando .texto-tarea {
      display: none;
    }

    .editando .editor {
      display: block;
      flex: 1;
    }

    .editor {
      display: none;
      border: 1px solid #ddd;
      padding: 5px;
      border-radius: 3px;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #6c757d;
    }

    .empty-state h3 {
      margin-bottom: 10px;
      color: #495057;
    }

    .tarea.removing {
      animation: slideOut 0.3s ease-in forwards;
    }

    @keyframes slideOut {
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    @media (max-width: 480px) {
      .form-group {
        flex-direction: column;
      }

      .filtros {
        flex-wrap: wrap;
      }

      .stats {
        flex-wrap: wrap;
        gap: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="contenedor">
    <header>
      <h1>üìù Lista de Tareas</h1>
      <div class="stats">
        <div class="stat">
          <span class="stat-number" id="total-tareas">0</span>
          <span>Total</span>
        </div>
        <div class="stat">
          <span class="stat-number" id="tareas-completadas">0</span>
          <span>Completadas</span>
        </div>
        <div class="stat">
          <span class="stat-number" id="tareas-pendientes">0</span>
          <span>Pendientes</span>
        </div>
      </div>
    </header>

    <form class="formulario-agregar">
      <div class="form-group">
        <input type="text" id="input-tarea" placeholder="Escribe una nueva tarea..." maxlength="100">
        <button type="submit" class="btn btn-primary" id="btn-agregar">Agregar</button>
      </div>
      <button type="button" class="btn btn-danger" id="btn-limpiar-completadas" style="display: none;">
        Limpiar Completadas
      </button>
    </form>

    <div class="filtros">
      <button class="filtro-btn active" data-filtro="todas">Todas</button>
      <button class="filtro-btn" data-filtro="pendientes">Pendientes</button>
      <button class="filtro-btn" data-filtro="completadas">Completadas</button>
    </div>

    <div class="lista-tareas" id="lista-tareas">
      <div class="empty-state">
        <h3>¬°No hay tareas!</h3>
        <p>Agrega tu primera tarea usando el formulario de arriba.</p>
      </div>
    </div>
  </div>

  <script>
    // Elementos del DOM
    const inputTarea = document.getElementById('input-tarea');
    const btnAgregar = document.getElementById('btn-agregar');
    const btnLimpiar = document.getElementById('btn-limpiar-completadas');
    const listaTareas = document.getElementById('lista-tareas');
    const emptyState = document.querySelector('.empty-state');
    const filtroBtns = document.querySelectorAll('.filtro-btn');
    const stats = {
      total: document.getElementById('total-tareas'),
      completadas: document.getElementById('tareas-completadas'),
      pendientes: document.getElementById('tareas-pendientes')
    };

    let tareas = JSON.parse(localStorage.getItem('tareas')) || [];
    let filtroActual = 'todas';

    // Funciones de utilidad
    function guardarTareas() {
      localStorage.setItem('tareas', JSON.stringify(tareas));
    }

    function actualizarEstadisticas() {
      const total = tareas.length;
      const completadas = tareas.filter(t => t.completada).length;
      const pendientes = total - completadas;

      stats.total.textContent = total;
      stats.completadas.textContent = completadas;
      stats.pendientes.textContent = pendientes;

      btnLimpiar.style.display = completadas > 0 ? 'block' : 'none';
    }

    function crearElementoTarea(tarea) {
      const div = document.createElement('div');
      div.className = `tarea ${tarea.completada ? 'completed' : ''}`;
      div.dataset.id = tarea.id;

      div.innerHTML = `
        <input type="checkbox" class="checkbox" ${tarea.completada ? 'checked' : ''}>
        <span class="texto-tarea">${tarea.texto}</span>
        <input type="text" class="editor" value="${tarea.texto}" maxlength="100">
        <div class="acciones">
          <button class="btn btn-small btn-primary btn-editar">Editar</button>
          <button class="btn btn-small btn-danger btn-eliminar">Eliminar</button>
        </div>
      `;

      // Event listeners para la tarea
      const checkbox = div.querySelector('.checkbox');
      const btnEditar = div.querySelector('.btn-editar');
      const btnEliminar = div.querySelector('.btn-eliminar');
      const editor = div.querySelector('.editor');

      checkbox.addEventListener('change', () => {
        tarea.completada = checkbox.checked;
        div.classList.toggle('completed', tarea.completada);
        guardarTareas();
        actualizarEstadisticas();
        filtrarTareas();
      });

      btnEditar.addEventListener('click', () => {
        if (div.classList.contains('editando')) {
          // Guardar cambios
          const nuevoTexto = editor.value.trim();
          if (nuevoTexto) {
            tarea.texto = nuevoTexto;
            div.querySelector('.texto-tarea').textContent = nuevoTexto;
            guardarTareas();
          }
          div.classList.remove('editando');
          btnEditar.textContent = 'Editar';
        } else {
          // Entrar en modo edici√≥n
          div.classList.add('editando');
          editor.focus();
          editor.select();
          btnEditar.textContent = 'Guardar';
        }
      });

      btnEliminar.addEventListener('click', () => {
        if (confirm('¬øEst√°s seguro de que quieres eliminar esta tarea?')) {
          div.classList.add('removing');
          setTimeout(() => {
            tareas = tareas.filter(t => t.id !== tarea.id);
            div.remove();
            guardarTareas();
            actualizarEstadisticas();
            mostrarEmptyState();
          }, 300);
        }
      });

      // Guardar al presionar Enter en el editor
      editor.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          btnEditar.click();
        } else if (e.key === 'Escape') {
          div.classList.remove('editando');
          editor.value = tarea.texto;
          btnEditar.textContent = 'Editar';
        }
      });

      return div;
    }

    function mostrarTareas() {
      listaTareas.innerHTML = '';
      let tareasFiltradas = tareas;

      switch (filtroActual) {
        case 'pendientes':
          tareasFiltradas = tareas.filter(t => !t.completada);
          break;
        case 'completadas':
          tareasFiltradas = tareas.filter(t => t.completada);
          break;
      }

      if (tareasFiltradas.length === 0) {
        mostrarEmptyState();
        return;
      }

      tareasFiltradas.forEach(tarea => {
        const elementoTarea = crearElementoTarea(tarea);
        listaTareas.appendChild(elementoTarea);
      });
    }

    function mostrarEmptyState() {
      if (tareas.length === 0) {
        listaTareas.innerHTML = '';
        listaTareas.appendChild(emptyState);
      }
    }

    function filtrarTareas() {
      mostrarTareas();
    }

    // Event listeners principales
    btnAgregar.addEventListener('click', (e) => {
      e.preventDefault();
      const texto = inputTarea.value.trim();

      if (texto) {
        const nuevaTarea = {
          id: Date.now(),
          texto: texto,
          completada: false,
          fechaCreacion: new Date().toISOString()
        };

        tareas.push(nuevaTarea);
        inputTarea.value = '';
        guardarTareas();
        actualizarEstadisticas();

        if (filtroActual === 'todas' || filtroActual === 'pendientes') {
          const elementoTarea = crearElementoTarea(nuevaTarea);
          if (listaTareas.contains(emptyState)) {
            listaTareas.innerHTML = '';
          }
          listaTareas.appendChild(elementoTarea);
        }
      }
    });

    // Agregar tarea al presionar Enter
    inputTarea.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        btnAgregar.click();
      }
    });

    // Filtros
    filtroBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filtroBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filtroActual = btn.dataset.filtro;
        filtrarTareas();
      });
    });

    // Limpiar tareas completadas
    btnLimpiar.addEventListener('click', () => {
      if (confirm('¬øEst√°s seguro de que quieres eliminar todas las tareas completadas?')) {
        tareas = tareas.filter(t => !t.completada);
        guardarTareas();
        actualizarEstadisticas();
        filtrarTareas();
      }
    });

    // Inicializaci√≥n
    actualizarEstadisticas();
    mostrarTareas();
  </script>
</body>
</html>